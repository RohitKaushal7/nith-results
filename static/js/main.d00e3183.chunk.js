(this["webpackJsonpnith-results"]=this["webpackJsonpnith-results"]||[]).push([[0],{30:function(e,t,c){},31:function(e,t,c){},34:function(e,t,c){},36:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},49:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(20),r=c.n(s),i=(c(30),c(3)),o=c(11),l=c(2),u=Object(n.createContext)({}),d=u,h=function(){return Object(n.useContext)(u)},b=(c(31),c(0));function j(){var e=h(),t=e.darkMode,c=e.setDarkMode;return Object(b.jsx)("div",{className:"dark_toggle",onClick:function(){var e,n;c((function(e){return!e})),null===(e=(n=window).gtag)||void 0===e||e.call(n,"event","dark_mode_toggle",{to:!t})},title:"toggle Dark Mode",children:Object(b.jsx)("div",{className:"cover"})})}var g=c(8),m=c.n(g),p=c(14),f=function(){var e=Object(p.a)(m.a.mark((function e(t){var c,n,a,s,r,i,o,l,u,d,h,b,j,g,p,f,O,v,x,N,k,S,L,E,C;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.branch,n=t.batch,a=t.setLoading,s=t.version,n=n.toString(),"FULL_COLLEGE"===c?r="FULL_COLLEGE":"FULL_YEAR"===c?r="FULL_YEAR - ".concat(n):(r="".concat(c," - ").concat(n),i&&(r+="&next_cursor=".concat(i))),a(!0),u=localStorage.getItem(s+":::"+r),d=!1,u)try{(o=JSON.parse(u)).expires&&(new Date(o.expires).getTime()>(new Date).getTime()?d=!0:(console.log("Cache Expired - ",s+":::"+r),localStorage.removeItem(s+":::"+r)))}catch(m){console.log("Parsing Error - ",m.message)}if(!d){e.next=14;break}l=o.data,i=null,console.log("CACHE HIT",s+":::"+r),a(!1),e.next=74;break;case 14:if("FULL_COLLEGE"!==c){e.next=35;break}console.log("FULL COLLEGE"),b=[],j="";case 18:return console.log("fetching data from "+j),e.next=21,fetch("https://nithp.herokuapp.com/api/result/student?limit=3000&next_cursor=".concat(j));case 21:return h=e.sent,e.next=24,h.json();case 24:g=e.sent,b=b.concat(g.data),j=g.pagination.next_cursor,p=b.length/3e3,a(100*p);case 29:if(""!=j){e.next=18;break}case 30:l=b,o={data:b,pagination:{next_cursor:""},expires:(new Date).getTime()+2592e6},localStorage.setItem(s+":::"+r,JSON.stringify(o)),e.next=73;break;case 35:if("FULL_YEAR"!==c){e.next=56;break}console.log("FULL_YEAR"),O=[],v="";case 39:return console.log("fetching data from "+v),e.next=42,fetch("https://nithp.herokuapp.com/api/result/student?roll=".concat(n.slice(2),"%&limit=3000&next_cursor=").concat(v));case 42:return f=e.sent,e.next=45,f.json();case 45:x=e.sent,O=O.concat(x.data),v=x.pagination.next_cursor,N=O.length/3e3,a(100*N);case 50:if(""!=v){e.next=39;break}case 51:l=O,o={data:O,pagination:{next_cursor:""},expires:(new Date).getTime()+2592e6},localStorage.setItem(s+":::"+r,JSON.stringify(o)),e.next=73;break;case 56:S=[],L="";case 58:return console.log("fetching data from "+L),e.next=61,fetch("https://nithp.herokuapp.com/api/result/student?branch=".concat(c,"&roll=").concat(n.slice(2),"%&limit=200&next_cursor=").concat(L));case 61:return k=e.sent,e.next=64,k.json();case 64:E=e.sent,S=S.concat(E.data),L=E.pagination.next_cursor,C=S.length/3e3,a(100*C);case 69:if(""!=L){e.next=58;break}case 70:l=S,o={data:S,pagination:{next_cursor:""},expires:(new Date).getTime()+2592e6},localStorage.setItem(s+":::"+r,JSON.stringify(o));case 73:a(!1);case 74:return e.abrupt("return",l);case 75:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(p.a)(m.a.mark((function e(t){var c,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://nithp.herokuapp.com/api/result/student/".concat(t));case 2:return c=e.sent,e.next=5,c.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(p.a)(m.a.mark((function e(){var t,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://nithp.herokuapp.com/api/result/branches");case 2:return t=e.sent,e.next=5,t.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(p.a)(m.a.mark((function e(){var t,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://nithp.herokuapp.com/api/result/last_updated");case 2:return t=e.sent,e.next=5,t.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=c(25),k=(c(34),c.p+"static/media/search.fd2a70fa.svg");function S(e){var t,c,a=e.branch,s=e.setBranch,r=e.batch,o=e.setBatch,l=e.setPage,u=(e.page,e.ranking),d=e.setRanking,h=e.searchString,j=e.setSearchString,g=e.cs,m=e.setCs,p=e.downloadCSV,f=Object(n.useState)([]),O=Object(i.a)(f,2),x=O[0],S=O[1];Object(n.useEffect)((function(){v().then((function(e){e&&S([{name:"FULL_COLLEGE",batches:[]},{name:"FULL_YEAR",batches:e[0].batches}].concat(Object(N.a)(e)))})).catch((function(e){console.log(e)}))}),[]);return Object(b.jsxs)("div",{className:"ctrl",children:[Object(b.jsxs)("div",{className:"ser",children:[Object(b.jsx)("img",{src:k,alt:""}),Object(b.jsx)("input",{type:"search",value:h,onChange:function(e){j(e.target.value)},placeholder:"Search by RollNo Name Branch cg:6.9 sg:9:0"})]}),Object(b.jsx)("div",{className:"branch-con",children:Object(b.jsxs)("select",{name:"branch",id:"branch",title:"Branch",value:a,onChange:function(e){s(e.target.value),l(0);var t=x.find((function(t){return t.name==e.target.value}));"FULL_COLLEGE"===e.target.value||t.batches.includes(Number(r))||o(t.batches[t.batches.length-1])},children:[Object(b.jsx)("option",{disabled:!0,children:"\ud83d\udcd1 Branch"}),x.map((function(e){return Object(b.jsx)("option",{value:e.name,children:e.name},e.name)}))]})}),Object(b.jsx)("div",{className:"batch-con",children:Object(b.jsxs)("select",{name:"batch",id:"batch",title:"Batch",value:r,onChange:function(e){o(e.target.value),l(0)},children:[Object(b.jsx)("option",{disabled:!0,children:"\ud83c\udf93 Batch"}),null===(t=x.find((function(e){return e.name==a})))||void 0===t||null===(c=t.batches)||void 0===c?void 0:c.map((function(e){return Object(b.jsx)("option",{value:e,children:e},e)}))]})}),Object(b.jsx)("div",{className:"cs",title:"sort: CGPA / SGPA",onClick:function(e){var t,c;m((function(e){return"c"===e?"s":"c"})),null===(t=(c=window).gtag)||void 0===t||t.call(c,"event","cs_changed",{from:g})},children:"c"===g?"Cg":"Sg"}),Object(b.jsx)("div",{className:"batch-con ranking-con",children:Object(b.jsxs)("select",{name:"ranking",id:"ranking",title:"Ranking",value:u,onChange:function(e){var t,c;d(e.target.value),null===(t=(c=window).gtag)||void 0===t||t.call(c,"event","ranking_changed",{to:e.target.value})},children:[Object(b.jsx)("option",{disabled:!0,children:"\ud83c\udfc6 Ranking"}),Object(b.jsx)("option",{value:"S",children:"Standard '1224'"}),Object(b.jsx)("option",{value:"D",children:"Dense '1223'"}),Object(b.jsx)("option",{value:"O",children:"Ordinal '1234'"})]})}),Object(b.jsx)("div",{className:"csv",onClick:p,title:"download result csv",children:Object(b.jsx)("span",{children:"\ud83c\udf67"})})]})}var L=c(24);c(36);function E(e){var t=e.hits;return Object(b.jsxs)("div",{className:"footer",children:[Object(b.jsx)(L.a,{href:"https://github.com/RohitKaushal7/nith-results","data-color-scheme":"no-preference: light; light: light; dark: dark;","data-icon":"octicon-star","data-show-count":"true","aria-label":"Star RohitKaushal7/nith-results on GitHub",children:"Star"}),Object(b.jsxs)("span",{id:"me",children:["Made with ",Object(b.jsx)("span",{className:"heart",children:"\u2764"})," by"," ",Object(b.jsx)("a",{href:"https://github.com/RohitKaushal7",children:"Rohit Kaushal"}),"."]}),Object(b.jsxs)("span",{id:"ref",children:["API : ",Object(b.jsx)("a",{href:"https://nithp.herokuapp.com/",children:"nithp.herokuapp.com/"})]}),Object(b.jsx)("span",{id:"count",children:t||"hits"})]})}var C=c(21),_=(c(37),c.p+"static/media/hero.d2dd3494.png"),y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"];function w(e){Object(C.a)(e);var t=h().version;return Object(b.jsxs)("div",{className:"header",children:[Object(b.jsx)("img",{src:_,alt:"",className:"logo"}),Object(b.jsxs)("div",{className:"main-heading",children:[Object(b.jsx)("h2",{children:"NITH RESULTS"}),Object(b.jsxs)("div",{className:"date",children:[y[new Date(t).getMonth()]," ",new Date(t).getFullYear()]})]})]})}c(38);function R(e){var t=e.value,c=e.indeterminate;return Object(b.jsxs)("div",{className:"progress",children:[c&&Object(b.jsx)("div",{className:"indeterminate"}),t&&Object(b.jsx)("div",{className:"determinate",style:{width:t+"%"}})]})}c(39);c(40);function F(e){var t=e.stud,c=e.cs,n=e.branch,a="c"===c?t.cgpi:t.sgpi,s="c"===c?t.sgpi:t.cgpi,r=Number(a)>=9.5&&Number(a)<10?"9.5":parseInt(a);return Object(b.jsx)(o.b,{to:"/r/".concat(t.roll),children:Object(b.jsxs)("div",{className:"card","data-rank":t.Rank,"data-base":r,children:[Object(b.jsxs)("div",{className:"rank",children:["#_",t.Rank]}),Object(b.jsx)("div",{className:"name",children:t.name}),Object(b.jsxs)("div",{className:"info",children:[Object(b.jsx)("div",{className:"rollno",children:t.roll}),["FULL_COLLEGE","FULL_YEAR"].includes(n)&&Object(b.jsx)("div",{className:"branch",children:t.branch})]}),Object(b.jsx)("div",{className:"cgpa",children:a}),Object(b.jsx)("div",{className:"sgpa",children:s})]})})}c(46);var D=c(23),I=100;function U(e){var t=e.history,c=t.location.search,a=new URLSearchParams(c),s=a.get("branch")?a.get("branch").toUpperCase():null,r=a.get("batch"),o=["S","D","O"].includes(a.get("r"))?a.get("r"):null,l=a.get("q"),u=["c","s"].includes(a.get("cs"))?a.get("cs"):null,d=Number(a.get("p"))&&Number(a.get("p"))>=0?Number(a.get("p")):null,j=Object(n.useState)(s||"FULL_COLLEGE"),g=Object(i.a)(j,2),m=g[0],p=g[1],O=Object(n.useState)(r||((new Date).getFullYear()-1).toString()),v=Object(i.a)(O,2),x=v[0],N=v[1],k=Object(n.useState)(o||"S"),L=Object(i.a)(k,2),C=L[0],_=L[1],y=Object(n.useState)(l||""),U=Object(i.a)(y,2),M=U[0],A=U[1],G=Object(n.useState)(u||"c"),J=Object(i.a)(G,2),B=J[0],P=J[1],T=Object(n.useState)(d||0),V=Object(i.a)(T,2),Y=V[0],H=V[1],K=Object(n.useState)(),q=Object(i.a)(K,2),z=q[0],Q=q[1],W=Object(n.useState)(),X=Object(i.a)(W,2),Z=X[0],$=X[1],ee=Object(n.useState)(),te=Object(i.a)(ee,2),ce=te[0],ne=te[1],ae=Object(n.useState)(),se=Object(i.a)(ae,2),re=se[0],ie=se[1],oe=Object(n.useState)(),le=Object(i.a)(oe,2),ue=le[0],de=le[1],he=Object(n.useState)(),be=Object(i.a)(he,2),je=be[0],ge=be[1],me=h().version;Object(n.useEffect)((function(){window.location.host.includes("localhost")||fetch("https://api.countapi.xyz/hit/rohitkaushal7/nith_results").then((function(e){return e.json()})).then((function(e){de(e.value)}))}),[]),Object(n.useEffect)((function(){if(me&&localStorage.getItem("VERSION")!=me){localStorage.setItem("VERSION",me),console.log("Clearing Cache for New Version.");for(var e=0;e<100;++e){var t=localStorage.key(e);if(!t)break;t.includes(":::")&&(console.log("CLEARED CACHE - ",t),localStorage.removeItem(t))}}}),[me]),Object(n.useEffect)((function(){me&&f({batch:x,branch:m,setLoading:ie,version:me}).then((function(e){e=e.sort((function(e,t){return"c"===B?Number(t.cgpi)-Number(e.cgpi):Number(t.sgpi)-Number(e.sgpi)})),Q(e)})).catch((function(e){console.error("Failed to Fetch. Err - ",e.message)}))}),[m,x,me]),Object(n.useEffect)((function(){if(z){var e=JSON.parse(JSON.stringify(z));switch(e.sort((function(e,t){return"c"===B?Number(t.cgpi)-Number(e.cgpi):Number(t.sgpi)-Number(e.sgpi)})),C){case"S":e=function(e,t){var c=1;if(e[0].Rank=1,"c"==t)for(var n=1;n<e.length;++n)e[n-1].cgpi!=e[n].cgpi&&(c=n+1),e[n].Rank=c;else for(var a=1;a<e.length;++a)e[a-1].sgpi!=e[a].sgpi&&(c=a+1),e[a].Rank=c;return e}(e,B);break;case"D":e=function(e,t){var c=1;if(e[0].Rank=1,"c"==t)for(var n=1;n<e.length;++n)e[n-1].cgpi!=e[n].cgpi&&c++,e[n].Rank=c;else for(var a=1;a<e.length;++a)e[a-1].sgpi!=e[a].sgpi&&c++,e[a].Rank=c;return e}(e,B);break;case"O":e=function(e,t){return e.forEach((function(e,t){e.Rank=t+1})),e}(e)}ne(e),$(e)}}),[C,z,B]),Object(n.useEffect)((function(){t.replace("/?".concat("FULL_COLLEGE"!==m?"branch=".concat(m,"&batch=").concat(x):"").concat("s"===B?"&cs=".concat(B):"").concat("S"!==C?"&r=".concat(C):"").concat(Y?"&p=".concat(Y):""))}),[m,x,C,B,Y]),Object(n.useEffect)((function(){if(ce){var e=M.toLocaleLowerCase(),t=ce.filter((function(t){var c="".concat(t.roll.toLocaleLowerCase()," ").concat(t.name.toLocaleLowerCase()," ").concat(t.branch.toLowerCase()," cg:").concat(t.cgpi," sg:").concat(t.sgpi);return String(c).includes(e)}));$(t),ge(M?t.length:null),H(0)}}),[M]);return Object(b.jsxs)("div",{children:[Object(b.jsx)(w,{}),Object(b.jsx)(S,{branch:m,setBranch:p,batch:x,setBatch:N,page:Y,setPage:H,searchString:M,setSearchString:A,ranking:C,setRanking:_,cs:B,setCs:P,downloadCSV:function(){var e,t;!function(e,t,c){var n="Rollno,Name,Branch,Sgpa,Cgpa\n",a=JSON.parse(JSON.stringify(e));a.sort((function(e,t){return Number(e.roll)-Number(t.roll)}));var s,r=Object(D.a)(a);try{for(r.s();!(s=r.n()).done;){var i=s.value;n+="".concat(i.roll,",").concat(i.name,",").concat(i.branch,",").concat(i.sgpi,",").concat(i.cgpi,"\n")}}catch(l){r.e(l)}finally{r.f()}var o=document.createElement("a");o.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(n)),o.setAttribute("download","".concat(t,"_").concat(c,".csv")),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}(z,m,x),null===(e=(t=window).gtag)||void 0===e||e.call(t,"event","download_csv",{data:{branch:m,batch:x,cs:B,ranking:C,page:Y}})}}),Object(b.jsxs)("div",{className:"query",onClick:function(){return document.execCommand("copy")},onCopy:function(e){var t,c;e.preventDefault(),e.clipboardData&&e.clipboardData.setData("text/plain","https://nith.netlify.app/?".concat("FULL_COLLEGE"!==m?"branch=".concat(m,"&batch=").concat(x):"").concat("s"===B?"&cs=".concat(B):"").concat("S"!==C?"&r=".concat(C):"").concat(Y?"&p=".concat(Y):"")),null===(t=(c=window).gtag)||void 0===t||t.call(c,"event","link_copied_from_duck")},title:"copy link",children:["\ud83d\udc24","?".concat("FULL_COLLEGE"!==m?"branch=".concat(m,"&batch=").concat(x):"").concat("s"===B?"&cs=".concat(B):"").concat("S"!==C?"&r=".concat(C):"").concat(Y?"&p=".concat(Y):"")]}),Object(b.jsx)("div",{id:"res_cnt",children:je?je+" results...":null}),Object(b.jsxs)("div",{className:"container",children:[re&&Object(b.jsx)(R,{indeterminate:!0,value:Number.isFinite(re)?re:null}),null===Z||void 0===Z?void 0:Z.slice(Y*I,Math.min(Y*I+I,Z.length)).map((function(e){return Object(b.jsx)(F,{stud:e,cs:B,branch:m},e.roll)}))]}),Math.floor((null===Z||void 0===Z?void 0:Z.length)/I)?Object(b.jsxs)("div",{className:"pagination",children:[Object(b.jsx)("div",{className:"btn",onClick:function(){return H((function(e){return Math.max(0,e-1)}))},children:"Prev"}),Object(b.jsx)("div",{className:"page",children:Y+1}),Object(b.jsx)("div",{className:"btn",onClick:function(){return H((function(e){return Math.min(e+1,Math.floor(Z.length/I))}))},children:"Next"})]}):null,Object(b.jsx)(E,{hits:ue})]})}c(47);function M(e){e.history;var t=e.match,c=Object(n.useState)(),a=Object(i.a)(c,2),s=a[0],r=a[1];if(Object(n.useEffect)((function(){O(t.params.roll).then((function(e){r(e)}))}),[]),!s)return Object(b.jsx)("div",{className:"loading",children:"loading..."});var l=[8,7,6,5,4,3,2,1].map((function(e){return s.result.filter((function(t){return t.sem==e}))})).filter((function(e){return e.length}));return Object(b.jsxs)("div",{className:"fullResult",children:[Object(b.jsxs)("header",{children:[Object(b.jsxs)("div",{className:"stInfo",children:[Object(b.jsxs)("div",{className:"stDesc",children:[Object(b.jsx)("div",{className:"stName",children:s.name}),Object(b.jsxs)("div",{className:"stRoll",children:[s.roll," ",s.branch]})]}),Object(b.jsxs)("div",{className:"stcg",children:[Object(b.jsx)("div",{className:"cp",children:s.cgpi}),Object(b.jsx)("div",{className:"cp_total",children:s.summary[s.summary.length-1].cgpi_total})]}),Object(b.jsxs)("div",{className:"ranks",children:[Object(b.jsxs)("div",{className:"rk",children:[Object(b.jsxs)("span",{className:"rkt",children:["#_ ",s.rank.class.cgpi]})," class"]}),Object(b.jsxs)("div",{className:"rk",children:[Object(b.jsxs)("span",{className:"rkt",children:["#_ ",s.rank.year.cgpi]})," year"]}),Object(b.jsxs)("div",{className:"rk",children:[Object(b.jsxs)("span",{className:"rkt",children:["#_ ",s.rank.college.cgpi]})," college"]})]})]}),Object(b.jsx)("div",{className:"home",children:Object(b.jsx)(o.b,{to:"/",children:Object(b.jsx)(w,{})})})]}),Object(b.jsx)("div",{className:"stSemesters",children:l.map((function(e,t){return Object(b.jsxs)("div",{className:"sem",style:{animationDelay:.1*t+"s"},children:[Object(b.jsxs)("div",{className:"stsg",children:[Object(b.jsxs)("div",{className:"semN",children:["Sem ",e[0].sem]}),Object(b.jsxs)("div",{className:"sg_total",children:[" ","+",s.summary[e[0].sem-1].sgpi_total]}),Object(b.jsx)("div",{className:"sg",children:s.summary[e[0].sem-1].sgpi})]}),Object(b.jsx)("div",{className:"subs",children:e.map((function(e){return Object(b.jsxs)("div",{className:"sub",children:[Object(b.jsx)("div",{className:"code",children:e.subject}),Object(b.jsx)("div",{className:"grade ".concat(e.grade),children:Number(e.sub_gp)/Number(e.sub_point)})]},e.subject)}))})]},t)}))})]})}c(48);var A=function(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("dark"))),t=Object(i.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(localStorage.getItem("VERSION")),r=Object(i.a)(s,2),u=r[0],h=r[1];return Object(n.useEffect)((function(){x().then((function(e){console.log("VERSION - ",e),h(e)})).catch((function(e){console.log("Failed to get Version.")}))}),[]),Object(n.useEffect)((function(){var e=document.querySelector(".dark_toggle .cover");!0===c?(localStorage.setItem("dark",!0),document.body.classList.add("dark"),e.style.width="1.7em",e.style.height="1.7em",e.style.background="#111"):(localStorage.setItem("dark",!1),document.body.classList.remove("dark"),e.style.width="2.5em",e.style.height="2.5em",e.style.background="#ffd700")}),[c]),Object(b.jsx)(o.a,{children:Object(b.jsxs)(d.Provider,{value:{darkMode:c,setDarkMode:a,version:u,setVersion:h},children:[Object(b.jsx)(j,{setDarkMode:a,darkMode:c}),Object(b.jsx)(l.a,{exact:!0,path:"/",component:U}),Object(b.jsx)(l.a,{exact:!0,path:"/r/:roll",component:M})]})})},G=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,50)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))};r.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(A,{})}),document.getElementById("root")),G()}},[[49,1,2]]]);
//# sourceMappingURL=main.d00e3183.chunk.js.map